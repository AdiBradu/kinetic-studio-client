"use strict";(self.webpackChunkkinetic_studio_client=self.webpackChunkkinetic_studio_client||[]).push([[202],{1277:function(e,t,a){a.d(t,{Z:function(){return r}});a(2791);var n=a(184);function r(e){var t=e.caption,a=e.title,r=e.copy;return(0,n.jsxs)("div",{className:"intro-section",children:[(0,n.jsxs)("div",{className:"intro-section-header",children:[(0,n.jsx)("p",{className:"caption",children:t}),(0,n.jsx)("h2",{children:a})]}),(0,n.jsx)("p",{children:r})]})}},3272:function(e,t,a){a.r(t),a.d(t,{default:function(){return D}});var n=a(5861),r=a(4942),i=a(1413),l=a(885),s=a(7757),u=a.n(s),c=a(2791),o=(a(8639),a(8458)),d=a(9458),m=a(4457),f=a(184);function p(e){var t=e.options,a=(e.label,e.name),n=e.value,r=e.handleChange,i=(0,c.useRef)(null);return(0,m.n5)(i),(0,f.jsx)(f.Fragment,{children:t.length>0&&(0,f.jsxs)("div",{className:"select-atom atom-field",children:[(0,f.jsx)("label",{children:(0,f.jsx)("p",{children:"Specializare"})}),(0,f.jsxs)("select",{name:a,onChange:r,defaultValue:"default",ref:i,children:[(0,f.jsx)("option",{disabled:!0,hidden:!0,value:"default",children:n}),t.map((function(e,t){return(0,f.jsx)("option",{value:e.denumire,children:e.denumire},t)}))]})]})})}function h(e){var t=e.options,a=(e.label,e.name),n=e.value,r=e.handleChange,i=(0,c.useRef)(null);return(0,m.n5)(i),(0,f.jsx)(f.Fragment,{children:t&&(0,f.jsx)(f.Fragment,{children:t.length>0&&(0,f.jsxs)("div",{className:"select-atom atom-field",children:[(0,f.jsx)("label",{children:(0,f.jsx)("p",{children:"Serviciu"})}),(0,f.jsxs)("select",{name:a,onChange:r,defaultValue:"default",ref:i,children:[(0,f.jsx)("option",{disabled:!0,hidden:!0,value:"default",children:n}),t.map((function(e,t){return(0,f.jsx)("option",{value:e.id,children:e.denumire},t)}))]})]})})})}function v(e){var t=e.options,a=(e.label,e.name),n=e.value,r=e.handleChange,i=(0,c.useRef)(null);return(0,m.n5)(i),(0,f.jsxs)("div",{className:"select-atom atom-field",children:[(0,f.jsx)("label",{children:(0,f.jsx)("p",{children:"Terapeut"})}),(0,f.jsxs)("select",{name:a,onChange:r,defaultValue:"default",ref:i,children:[(0,f.jsx)("option",{disabled:!0,hidden:!0,value:"default",children:n}),t&&t.map((function(e,t){return(0,f.jsxs)("option",{value:e.id,children:[e.nume," ",e.prenume]},t)}))]})]})}function g(e){var t=e.label,a=e.value,n=e.handleChange,r=e.options,i=(0,c.useRef)(null);(0,m.n5)(i);var l=function(e){var t=Math.floor(e/60),a=e%60;return"".concat(t,":").concat(a)};return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"select-atom atom-field",children:[(0,f.jsx)("label",{children:(0,f.jsx)("p",{children:"Ora"})}),(0,f.jsxs)("select",{name:t,onChange:n,defaultValue:"default",ref:i,children:[(0,f.jsx)("option",{disabled:!0,hidden:!0,value:"default",children:a}),r&&r.map((function(e,t){return(0,f.jsx)("option",{value:e,children:l(e)},t)}))]})]})})}function x(e){var t=e.label,a=e.value,n=e.type,r=e.placeholder,i=e.handleChange,l=(0,c.useRef)(null);return(0,m.n5)(l),(0,f.jsxs)("div",{className:"input-atom",id:t,children:[(0,f.jsx)("label",{children:(0,f.jsx)("p",{children:t})}),(0,f.jsx)("input",{value:a,name:t,type:n,placeholder:r,onChange:i,required:!0,ref:l})]})}var j=a(9513),S=a.n(j),Z=a(1277),b=function(e,t){var a=(0,c.useState)(),n=(0,l.Z)(a,2),r=n[0],i=n[1],s=(0,c.useState)(0),u=(0,l.Z)(s,2),o=u[0],d=u[1],m=(0,c.useState)(),f=(0,l.Z)(m,2),p=f[0],h=f[1];return(0,c.useEffect)((function(){e&&e.forEach((function(e){parseInt(t)===e.id&&(d(e.sedinte),i(e.specializare),h(6e4*(e.durata+60)))}))}),[t,e]),{specializare:r,sedinte:o,durataSedinta:p}},C=function(e,t){var a=(0,c.useState)(),n=(0,l.Z)(a,2),r=n[0],i=n[1];return(0,c.useEffect)((function(){if(t){var a=e.filter((function(e){return e.specializare.toLowerCase().includes(t)}));i(a)}}),[e,t]),{filteredTerapeuti:r}},y=a(6578),N=a(7664),_=function(e,t){var a=(0,c.useState)([]),n=(0,l.Z)(a,2),r=n[0],i=n[1],s=(0,c.useState)([]),u=(0,l.Z)(s,2),o=u[0],d=u[1],f=(0,y.a)(N.qN,{variables:{id:parseFloat(t)}}),p=null!==f&&void 0!==f&&f.data?f.data.getPartnerCurrentSchedule:[],h=(0,y.a)(N.U5,{variables:{id:parseFloat(t)}}),v=null!==h&&void 0!==h&&h.data?h.data.getPartnerFilledTimeSlots:[];return(0,c.useEffect)((function(){if(p){var e=(0,m.ty)(p);e.length&&i(e)}if(v){var t=(0,m.ty)(v);t.length&&d(t)}}),[p,v]),{terapeutCalendar:r,terapeutProgramari:o}},$=function(e,t,a){var n=(0,c.useState)({}),r=(0,l.Z)(n,2),i=r[0],s=r[1];(0,c.useEffect)((function(){if(e){s({});for(var a=0;a<t.length;a++)(0,m.NK)(t[a].timeSlotStart)[0]===(0,m.x6)(e)[0]&&s({start:t[a].timeSlotStart,end:t[a].timeSlotEnd})}}),[e,t]);var u=(0,c.useState)({}),o=(0,l.Z)(u,2),d=o[0],f=o[1];return(0,c.useEffect)((function(){if(e){f({});for(var t=0;t<a.length;t++)(0,m.NK)(a[t].timeSlotStart)[0]===(0,m.x6)(e)[0]&&f({start:a[t].timeSlotStart,end:a[t].timeSlotEnd})}}),[e,a]),{calendarTimeslotsForDate:i,programariTimeslotsForDate:d}},E=function(e,t,a,n){for(var r=(0,c.useState)(),i=(0,l.Z)(r,2),s=i[0],u=i[1],o=[],d=0;d<48;d++)o.push(30*d);return(0,c.useEffect)((function(){var r=[],i=(e.start-a)/6e4,l=(e.end-a)/6e4,s=(t.start-a)/6e4,c=(t.end-a)/6e4;n?o.forEach((function(e){e>=i&e<=l-(n/6e4-60)&&(s?(e<=s-n/6e4||e>=c)&&r.push(e):r.push(e))})):o.forEach((function(e){r.push(e)})),u(r)}),[e,t,a,n]),{filteredHours:s}},F=function(e,t,a,n,r){(0,c.useEffect)((function(){r((0,i.Z)((0,i.Z)({},n),{},{programari:e}))}),[e]),(0,c.useEffect)((function(){r((0,i.Z)((0,i.Z)({},n),{},{sedinte:t,specializare:a}))}),[t])},P=function(e,t,a,n){var r=(0,c.useState)(),i=(0,l.Z)(r,2),s=i[0],u=i[1];return(0,c.useEffect)((function(){if(e){var n=[],r={sedinta:1,terapeut:t,timeSlotStart:e.setHours(0,0,0,0)+6e4*parseInt(a,10),timeSlotEnd:e.setHours(0,0,0,0)+6e4*(parseInt(a,10)+60)};n.push(r),u(n)}}),[e,a]),{programari:s}},z=a(1388);function T(){return(0,f.jsxs)("div",{className:"error-screen",children:[(0,f.jsx)("p",{children:"Ne cerem scuze!"}),(0,f.jsx)("p",{children:"Te rugam sa reincarci aceasta pagina."})]})}var I,k=a(4376),w=a(168),A=(0,a(6320).Ps)(I||(I=(0,w.Z)(["\n  mutation CreateCustomerOrder($firstName: String!, $lastName: String!, $phone: String!, $email: String!, $region: String!, $city: String!, $street: String!, $streetNumber: String!, $serviceId: Float!, $details: [OderDetailIn]){ \n    createCustomerOrder(firstName: $firstName, lastName: $lastName, phone: $phone, email: $email, region: $region, city: $city, street: $street, streetNumber: $streetNumber, serviceId: $serviceId, details: $details) {\n      successful\n      message    \n    }\n  }\n"]))),q=function(e,t){var a=(0,c.useState)(),n=(0,l.Z)(a,2),r=n[0],i=n[1];return(0,c.useEffect)((function(){if(t){var a=e.filter((function(e){return e.denumire.toLowerCase().includes(t)}));i(a)}}),[e,t]),{filteredServicii:r}};function D(){var e=(0,c.useContext)(o.I).isTablet,t=(0,c.useContext)(o.I).programareFromCardObj,a=(0,l.Z)(t,2),s=a[0],j=a[1],I=(0,c.useState)(!1),w=(0,l.Z)(I,2),D=w[0],O=(w[1],(0,c.useState)(!1)),R=(0,l.Z)(O,2),V=(R[0],R[1]),H=(0,c.useState)(!1),L=(0,l.Z)(H,2),G=L[0],M=L[1],K=(0,c.useState)([]),U=(0,l.Z)(K,2),B=U[0],J=U[1],Q=(0,c.useState)(null),W=(0,l.Z)(Q,2),X=W[0],Y=W[1],ee=(0,c.useState)([]),te=(0,l.Z)(ee,2),ae=te[0],ne=te[1],re=(0,c.useState)(null),ie=(0,l.Z)(re,2),le=ie[0],se=ie[1],ue=(0,c.useState)(null),ce=(0,l.Z)(ue,2),oe=ce[0],de=ce[1],me=(0,c.useState)(null),fe=(0,l.Z)(me,2),pe=fe[0],he=fe[1],ve=(0,c.useState)(null),ge=(0,l.Z)(ve,2),xe=(ge[0],ge[1]),je=(0,c.useState)(!1),Se=(0,l.Z)(je,2),Ze=Se[0],be=Se[1],Ce=(0,c.useState)(),ye=(0,l.Z)(Ce,2),Ne=ye[0],_e=ye[1],$e=(0,c.useState)(),Ee=(0,l.Z)($e,2),Fe=Ee[0],Pe=Ee[1],ze=(0,c.useState)({nume:"",prenume:"",telefon:"",email:"",judet:"",localitate:"",strada:"",nr:"",serviciu:0,sedinte:"",specializare:"",programari:[]}),Te=(0,l.Z)(ze,2),Ie=Te[0],ke=Te[1],we=(0,k.D)(A),Ae=(0,l.Z)(we,2),qe=Ae[0],De=(Ae[1],(0,y.a)(N.I9)),Oe=null!==De&&void 0!==De&&De.data?De.data.getAllMTypes:[],Re=(0,y.a)(N.cb),Ve=null!==Re&&void 0!==Re&&Re.data?Re.data.getAllServices:[],He=(0,y.a)(N.kn),Le=null!==He&&void 0!==He&&He.data?He.data.getAllPartners:[];(0,c.useEffect)((function(){if(G||s){if(Oe){var e=(0,m.qP)(Oe);e.length&&(V(!0),J(e))}if(Ve){var t=(0,m.G9)(Ve);t.length&&(V(!0),ne(t))}if(Le){var a=(0,m.b9)(Le);a.length&&de(a)}}}),[G,s]);var Ge=b(ae,le),Me=Ge.sedinte,Ke=Ge.durataSedinta;(0,c.useEffect)((function(){if(pe)for(var e=0;e<oe.length;e++)oe[e].id==pe&&xe(oe[e].id)}),[pe]);var Ue=C(oe,X).filteredTerapeuti,Be=q(ae,X).filteredServicii,Je=P(Ne,pe,Fe,Me).programari,Qe=function(e){var t=e.target.value;ke((0,i.Z)((0,i.Z)({},Ie),{},(0,r.Z)({},e.target.name,t)))};(0,c.useEffect)((function(){s&&M(!0)}),[s]),(0,c.useEffect)((function(){if(s){var e=B.filter((function(e){return e.id==s.specializare})),t=ae.filter((function(e){return e.denumire.toLowerCase()==s.denumire.toLowerCase()}));Y(e[0].denumire),se(s.denumire),ke((0,i.Z)((0,i.Z)({},Ie),{},{serviciu:t[0].id,specializare:e[0].denumire}))}}),[G]);var We=function(){var e=(0,n.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return be(!0),t=[],Ie.programari.length&&Ie.programari.forEach((function(e){var a={partner_id:parseFloat(e.terapeut),appointment_start:parseFloat(e.timeSlotStart),appointment_end:parseFloat(e.timeSlotEnd),appointment_order:parseInt(e.sedinta)};t.push(a)})),e.next=5,qe({variables:{firstName:Ie.prenume,lastName:Ie.nume,phone:Ie.telefon,email:Ie.email,region:Ie.judet,city:Ie.localitate,street:Ie.strada,streetNumber:Ie.nr,serviceId:parseFloat(Ie.serviciu),details:t}});case 5:setTimeout((function(){ke({nume:"",prenume:"",telefon:"",email:"",judet:"",localitate:"",strada:"",nr:"",serviciu:0,sedinte:"",specializare:"",programari:[]}),be(!1),M(!1),j(null),Y(null),se(null),he(null),_e(null),Pe(null),document.querySelector(".hero-section").scrollIntoView({behavior:"smooth",block:"start"})}),2e3);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=_(oe,pe),Ye=Xe.terapeutCalendar,et=Xe.terapeutProgramari,tt=$(Ne,Ye,et),at=tt.calendarTimeslotsForDate,nt=tt.programariTimeslotsForDate,rt=E(at,nt,Ne,Ke).filteredHours;return F(Je,Me,X,Ie,ke),(0,f.jsx)(f.Fragment,{children:De.loading||Re.loading||He.loading?(0,f.jsx)(z.Z,{}):D?(0,f.jsx)(T,{}):(0,f.jsxs)("section",{className:e?"programare-section container mx-auto":"programare-section container-fluid mx-auto",id:"programare-section",children:[(0,f.jsx)(Z.Z,{caption:"programare",title:"Programeaza-te in 4 pasi simpli!",copy:"Alege serviciul, terapeutul, data si ora programarii si achita cash sau cu cardul in siguranta."}),(0,f.jsxs)("div",{className:"programare-section-container flex flex-column justify-center align-center",children:[G?(0,f.jsx)(p,{value:s?X:"Alege specializarea",handleChange:function(e){var t=e.target.value;Y(t)},name:"specializare",label:"specializare",options:B}):"",X?(0,f.jsx)(h,{value:s?le:"Alege serviciul",handleChange:function(e){var t=e.target.value;se(t),ke((0,i.Z)((0,i.Z)({},Ie),{},{serviciu:t}))},name:"serviciu",label:"serviciu",options:Be}):"",le?(0,f.jsx)(v,{value:"Alege terapeutul",handleChange:function(e){var t=e.target.value;he(t)},name:"terapeut",label:"terapeut",options:Ue}):"",pe?(0,f.jsxs)("div",{className:"calendar",children:[(0,f.jsx)("label",{children:(0,f.jsx)("p",{children:"Alege data"})}),(0,f.jsx)(S(),{selected:Ne,onChange:function(e){return _e(e)},startDate:Ne,dayClassName:function(e){return(0,m.qC)(et,e)?"active-programare":(0,m.xd)(Ye,e)?"active-calendar":"innactive"},minDate:new Date,inline:!0})]}):"",Ne?(0,f.jsx)(g,{value:"Alege ora",handleChange:function(e){Pe(e.target.value)},name:"time",label:"time",options:rt}):"",Fe?(0,f.jsx)(x,{value:Ie.nume,handleChange:Qe,name:"nume",label:"nume",type:"text",placeholder:"Nume"}):"",""!==Ie.nume?(0,f.jsx)(x,{value:Ie.prenume,handleChange:Qe,name:"prenume",label:"prenume",type:"text",placeholder:"prenume"}):"",""!==Ie.prenume?(0,f.jsx)(x,{value:Ie.telefon,handleChange:Qe,name:"telefon",label:"telefon",type:"number",placeholder:"telefon"}):"",""!==Ie.telefon?(0,f.jsx)(x,{value:Ie.email,handleChange:Qe,name:"email",label:"email",type:"email",placeholder:"email"}):"",""!==Ie.email?(0,f.jsx)(x,{value:Ie.judet,handleChange:Qe,name:"judet",label:"judet",type:"text",placeholder:"judet"}):"",""!==Ie.judet?(0,f.jsx)(x,{value:Ie.localitate,handleChange:Qe,name:"localitate",label:"localitate",type:"text",placeholder:"localitate"}):"",""!==Ie.localitate?(0,f.jsx)(x,{value:Ie.strada,handleChange:Qe,name:"strada",label:"strada",type:"text",placeholder:"strada"}):"",""!==Ie.strada?(0,f.jsx)(x,{value:Ie.nr,handleChange:Qe,name:"nr",label:"nr",type:"text",placeholder:"nr strada"}):"",""!==Ie.nr?(0,f.jsx)("div",{className:"btn-wrapper flex flex-column justify-center align-center",onClick:function(){return We()},children:(0,f.jsx)(d.Z,{text:"trimite",classe:"btn-programare-client"})}):"",G?"":(0,f.jsx)("div",{className:"btn-wrapper flex flex-column justify-center align-center",onClick:function(){return M(!0)},children:(0,f.jsx)(d.Z,{text:"programeaza-te!",classe:"btn-programare-client"})}),Ze?(0,f.jsx)("p",{style:{marginTop:"16px"},children:"Comanda a fost finalizata cu succes!"}):""]})]})})}},7664:function(e,t,a){a.d(t,{I9:function(){return o},U5:function(){return p},cb:function(){return d},kn:function(){return m},qN:function(){return f}});var n,r,i,l,s,u=a(168),c=a(6320),o=(0,c.Ps)(n||(n=(0,u.Z)(["\n  query {\n    getAllMTypes {\n      mt_id\n      mt_name\n      created\n      updated\n    }\n  }\n"]))),d=(0,c.Ps)(r||(r=(0,u.Z)(["\n  query {\n    getAllServices {\n      s_id\n      service_name\n      m_type_id\n      mt_name\n      appointments_number\n      appointment_duration\n      service_cost\n      profile_picture_url\n    }\n  }\n"]))),m=(0,c.Ps)(i||(i=(0,u.Z)(["\n  query {\n    getAllPartners {\n      p_id\n      first_name\n      last_name\n      profile_picture_url\n      m_types\n      description\n    }\n  }\n"]))),f=(0,c.Ps)(l||(l=(0,u.Z)(["\n  query GetPartnerCurrentSchedule($id: Float) {\n    getPartnerCurrentSchedule(id: $id) {\n      schedule_start\n      schedule_end\n    }\n  }\n"]))),p=(0,c.Ps)(s||(s=(0,u.Z)(["\n  query GetPartnerFilledTimeSlots($id: Float) {\n    getPartnerFilledTimeSlots(id: $id) {\n      schedule_start\n      schedule_end\n    }\n  }\n"])))}}]);
//# sourceMappingURL=202.d39858e3.chunk.js.map